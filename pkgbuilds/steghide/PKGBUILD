# Contributor: Jens Pranaitis <jens@jenux.homelinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>
# Contributor: Jason Chu <jason@archlinux.org>
pkgname=steghide
pkgver=0.5.1
pkgrel=1
pkgdesc="Steghide is a steganography program which embeds a secret message \
	in a cover file by replacing some of the least significant bits"
arch=('i686' 'x86_64')
url="http://steghide.sourceforge.net"
license=('GPL')
depends=('libmcrypt' 'mhash' 'gcc' 'libjpeg' 'zlib' 'libtool')
source=(http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz \
	gcc-4.3.patch gcc34.patch gcc4.patch)
md5sums=('5be490e24807d921045780fd8cc446b3'
         '1508db0fe73d79a4fae32db7a03b7c10'
         'db8d5a881ddb5a95162c7b6e6ebf25c1'
         '4bf11b9304a29bda4207e7d0ffedd85a')
build() {
  cd "${srcdir}"/$pkgname-$pkgver
  # this patch courtesy gentoo bug tracker
  patch -Np1 -i "${srcdir}"/gcc34.patch || return 1
  patch -Np1 -i "${srcdir}"/gcc4.patch || return 1
  patch -Np1 -i "${srcdir}"/gcc-4.3.patch || return 1
  autoreconf -i
  ./configure --prefix=/usr
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
